//Bit Vector Set (Variation 1)
#include <stdio.h>
#include <stdbool.h>

void initialize(unsigned char *set);
void insert(unsigned char *set, int elem);
void deleteEl(unsigned char *set, int elem);
bool find(unsigned char set, int elem);
unsigned char setUnion(unsigned char A, unsigned char B);
unsigned char intersection(unsigned char A, unsigned char B);
unsigned char difference(unsigned char A, unsigned char B);
void display(unsigned char set);

int main() {
    unsigned char A;
    initialize(&A);                 // A = 0 -> {}
    insert(&A, 1);                  // A = 00000010 (2)
    insert(&A, 6);                  // A = 01000010 (66)
    printf("A = "); display(A);     // {1, 6}

    unsigned char B = 200;          // 11001000 -> {3, 6, 7}
    printf("\nB = "); display(B);

    unsigned char C = setUnion(A, B);
    printf("\nunion(A,B) = "); display(C);          // {1, 3, 6, 7}

    C = intersection(A, B);
    printf("\nintersection(A,B) = "); display(C);   // {6}

    C = difference(A, B);
    printf("\ndifference(A,B) = "); display(C);     // {1}

    printf("\nfind(A,6) = %s\n", find(A,6) ? "true" : "false");
    deleteEl(&A, 6);
    printf("after delete 6, A = "); display(A);   // {1}
    deleteEl(&A, 1);
    printf("\nafter delete 1, A = "); display(A);   // {}
    
    
    return 0;
}

void initialize(unsigned char *set) {
    *set = 0;
}
void insert(unsigned char *set, int elem) {
    if (elem < 0 || elem >= 8) return;
    *set |= (unsigned char)(1 << elem);
}
void deleteEl(unsigned char *set, int elem) {
    if (elem < 0 || elem >= 8) return;
    *set &= (unsigned char) ~ (1 << elem);
}
bool find(unsigned char set, int elem) {
    if (elem < 0 || elem >= 8) return false;
    return (set & (unsigned char)(1 << elem)) != 0;
}
unsigned char setUnion(unsigned char A, unsigned char B) {
    return (unsigned char)(A | B);
}
unsigned char intersection(unsigned char A, unsigned char B) {
    return (unsigned char)(A & B);
}
unsigned char difference(unsigned char A, unsigned char B) {
    return (unsigned char)(A & (unsigned char)~B);
}
void display(unsigned char set) {
    for (int i = 0; i < 8; i++) {
        if (set & (unsigned char)(1 << i)){
            printf("%d ", i);
        }
    }
}